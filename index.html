<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Google Books Trendanalyse (Deutsch)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #0f172a;
      --card: rgba(255, 255, 255, 0.08);
      --border: rgba(255, 255, 255, 0.15);
      --text: #e5e7eb;
      --accent: #38bdf8;
    }

    * {
      box-sizing: border-box;
      font-family: "Inter", sans-serif;
    }

    body {
      margin: 0;
      background: radial-gradient(circle at top, #1e293b, #020617);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .container {
      width: 90%;
      max-width: 1000px;
      background: var(--card);
      backdrop-filter: blur(14px);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 32px;
      box-shadow: 0 30px 80px rgba(0,0,0,0.4);
    }

    h1 {
      font-weight: 600;
      margin-bottom: 8px;
    }

    p {
      opacity: 0.8;
      margin-bottom: 24px;
    }

    .controls {
      display: flex;
      gap: 12px;
      margin-bottom: 24px;
      flex-wrap: wrap;
    }

    input {
      flex: 1;
      padding: 14px 16px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.05);
      color: var(--text);
      font-size: 16px;
    }

    button {
      padding: 14px 22px;
      border-radius: 12px;
      border: none;
      background: linear-gradient(135deg, #38bdf8, #0ea5e9);
      color: #020617;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s ease, opacity 0.2s ease;
    }

    button:hover {
      transform: translateY(-2px);
      opacity: 0.9;
    }

    canvas {
      margin-top: 10px;
    }

    footer {
      margin-top: 20px;
      font-size: 12px;
      opacity: 0.6;
      text-align: center;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Google Books Trendanalyse</h1>
    <p>
      Deutsches Google-Books-Korpus (2019) · Zeitraum 2000–2019 · relative Worthäufigkeit
    </p>

    <div class="controls">
      <input id="termInput" placeholder="Begriff(e) eingeben, z. B. Digitalisierung, KI, Nachhaltigkeit" />
      <button onclick="loadTrend()">Analyse starten</button>
    </div>

    <canvas id="chart" height="120"></canvas>

    <footer>
      Datenquelle: Google Books Ngram Viewer · normierte Tokenhäufigkeit
    </footer>
  </div>

  <script>
    const ctx = document.getElementById("chart").getContext("2d");
    let chart;

    async function loadTrend() {
      const terms = document.getElementById("termInput").value.trim();
      if (!terms) return;

      const url = `https://books.google.com/ngrams/json?content=${encodeURIComponent(
        terms
      )}&year_start=2000&year_end=2019&corpus=31&smoothing=0`;

      const response = await fetch(url);
      const data = await response.json();

      const labels = Array.from({ length: 20 }, (_, i) => 2000 + i);

      const datasets = data.map((entry, index) => ({
        label: entry.ngram,
        data: entry.timeseries,
        borderWidth: 2,
        tension: 0.25,
        fill: false
      }));

      if (chart) chart.destroy();

      chart = new Chart(ctx, {
        type: "line",
        data: {
          labels,
          datasets
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              labels: {
                color: "#e5e7eb"
              }
            }
          },
          scales: {
            x: {
              title: {
                display: true,
                text: "Jahr",
                color: "#e5e7eb"
              },
              ticks: { color: "#e5e7eb" }
            },
            y: {
              title: {
                display: true,
                text: "Relative Häufigkeit",
                color: "#e5e7eb"
              },
              ticks: { color: "#e5e7eb" }
            }
          }
        }
      });
    }
  </script>
</body>
</html>
